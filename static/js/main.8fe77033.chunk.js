(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={Hero__wrapper:"Headers_Hero__wrapper__V0euL",Footer__wrapper:"Headers_Footer__wrapper__3nADv",Footer__hyperlink:"Headers_Footer__hyperlink__2iec3",Footer__icon:"Headers_Footer__icon__1qVYy"}},13:function(e,t,a){e.exports={SearchInput__Wrapper:"SearchBar_SearchInput__Wrapper__2lcid",SearchInput__Button:"SearchBar_SearchInput__Button__2wiqi",SearchInput__Option:"SearchBar_SearchInput__Option__3pQSc",SearchBar__Wrapper:"SearchBar_SearchBar__Wrapper__3g_s5"}},32:function(e,t,a){e.exports={App:"App_App__1yN1o"}},34:function(e,t,a){e.exports={Spinner:"Spinner_Spinner__39iCH","lds-dual-ring":"Spinner_lds-dual-ring__1wcoV"}},38:function(e,t,a){e.exports={TextButton:"Buttons_TextButton__13fUw"}},4:function(e,t,a){e.exports={Resuls__Wrapper:"Results_Resuls__Wrapper__1gnDu",Results__Body:"Results_Results__Body__p-0NU",Results__BodyOpen:"Results_Results__BodyOpen__nxgXs",Results__BodyClosed:"Results_Results__BodyClosed__27sLl",CityDataCard__Wrapper:"Results_CityDataCard__Wrapper__3IaqQ","fade-in":"Results_fade-in__1Bc1C",CityDataCard__Summary:"Results_CityDataCard__Summary__1VSsD",CityDataCard__Header:"Results_CityDataCard__Header__3nxqW",CityDataCard__TimeStamp:"Results_CityDataCard__TimeStamp__3aCRJ",CityDataCard__Cityname:"Results_CityDataCard__Cityname__1FqJA",CityDataCard__Value:"Results_CityDataCard__Value__3muSI"}},44:function(e,t,a){e.exports=a(83)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},7:function(e,t,a){e.exports={CityDataCard__Content:"CityDataCardContent_CityDataCard__Content__3nmbu",CityDataCard__ContentMain:"CityDataCardContent_CityDataCard__ContentMain__1IZZT",CityDataCard__ContentFooter:"CityDataCardContent_CityDataCard__ContentFooter__3CgGv",CityDataCard__ContentMainAmbigious:"CityDataCardContent_CityDataCard__ContentMainAmbigious__3Jpsy",CityDataCard__ContentMainFailed:"CityDataCardContent_CityDataCard__ContentMainFailed__3pypM",CityDataCard__ContentMainLoading:"CityDataCardContent_CityDataCard__ContentMainLoading__54gl0"}},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),c=a.n(i),o=(a(49),a(3)),u=a(32),l=a.n(u),s=a(10),_=a.n(s),m=function(){return r.a.createElement("header",{className:_.a.Hero__wrapper},r.a.createElement("h1",null,"de-PM-ify"),r.a.createElement("h2",null,"track most polluted places in Europe"))};function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var f=r.a.createElement("path",{className:"st0",d:"M41 102.6c-2.6 2.5-5.8 3.8-9.6 3.8s-7-1.3-9.6-3.8c-2.6-2.5-3.8-5.7-3.8-9.3 0-3.7 1.3-6.8 3.8-9.3 2.6-2.5 5.8-3.8 9.6-3.8s7 1.3 9.6 3.8c2.6 2.5 3.8 5.7 3.8 9.3.1 3.7-1.2 6.8-3.8 9.3zm-15.4-3.3c1.5 1.6 3.4 2.3 5.8 2.3 2.3 0 4.3-.8 5.8-2.3 1.5-1.6 2.3-3.6 2.3-6 0-2.5-.8-4.5-2.3-6-1.5-1.6-3.4-2.3-5.8-2.3-2.3 0-4.3.8-5.8 2.3-1.5 1.6-2.3 3.6-2.3 6 .1 2.5.8 4.5 2.3 6zm40-19.1c3.4 0 6.4 1.2 8.8 3.6 2.4 2.4 3.6 5.5 3.6 9.5 0 3.9-1.2 7.1-3.6 9.6-2.4 2.5-5.2 3.7-8.4 3.7s-6.1-1.4-8.7-4.2v13.2h-5.4V80.5h5.4V85c2.1-3.2 4.9-4.8 8.3-4.8zm-8.4 13.2c0 2.4.7 4.4 2.2 6 1.5 1.6 3.3 2.3 5.4 2.3 2.1 0 4-.8 5.5-2.3 1.6-1.5 2.4-3.5 2.4-6s-.8-4.5-2.3-6.1c-1.5-1.6-3.4-2.4-5.5-2.4s-4 .8-5.4 2.4c-1.6 1.6-2.3 3.6-2.3 6.1zm52.6 2.3h-20c.1 1.9 1 3.4 2.5 4.5s3.4 1.7 5.4 1.7c3.2 0 5.6-1 7.3-3l3.1 3.4c-2.8 2.8-6.3 4.3-10.8 4.3-3.6 0-6.6-1.2-9.1-3.6-2.5-2.4-3.8-5.6-3.8-9.6s1.3-7.2 3.8-9.6c2.6-2.4 5.6-3.6 9-3.6s6.4 1 8.9 3.1c2.4 2.1 3.6 5 3.6 8.7v3.7zm-20-4.3h14.6c0-2.1-.7-3.8-2-4.9-1.3-1.2-3-1.7-5-1.7s-3.7.6-5.3 1.8c-1.5 1.2-2.3 2.8-2.3 4.8zm33.7.9v13.8h-5.4V80.5h5.4v4.7c.9-1.6 2.1-2.8 3.6-3.7 1.5-.9 3.2-1.3 4.9-1.3 2.9 0 5.2.9 7 2.6 1.8 1.8 2.7 4.3 2.7 7.6V106h-5.4V92c0-4.7-2-7.1-5.9-7.1-1.9 0-3.5.6-4.8 1.8-1.4 1.4-2.1 3.2-2.1 5.6z"}),y=r.a.createElement("path",{className:"st1",d:"M171.8 106.1h-4.9v-3.4c-2.1 2.5-4.9 3.8-8.5 3.8-2.7 0-4.9-.8-6.6-2.3-1.7-1.5-2.6-3.5-2.6-6s.9-4.4 2.8-5.6c1.9-1.2 4.4-1.9 7.5-1.9h7v-1c0-3.4-1.9-5.1-5.7-5.1-2.4 0-4.8.9-7.4 2.6l-2.4-3.4c3.1-2.5 6.6-3.7 10.6-3.7 3 0 5.5.8 7.4 2.3 1.9 1.5 2.9 3.9 2.9 7.2v16.5zm-5.4-9.5v-2.2h-6c-3.9 0-5.8 1.2-5.8 3.6 0 1.2.5 2.2 1.4 2.9 1 .7 2.3 1 4 1 1.7 0 3.2-.5 4.5-1.4 1.2-1 1.9-2.3 1.9-3.9zm24.9 9.9c-3.2 0-6-1.2-8.4-3.7-2.4-2.5-3.6-5.7-3.6-9.6 0-3.9 1.2-7.1 3.6-9.5 2.4-2.4 5.4-3.6 8.8-3.6s6.2 1.6 8.3 4.8v-4.5h5.4v34.8H200V102c-2.6 3.1-5.5 4.5-8.7 4.5zm-6.7-13.1c0 2.4.8 4.4 2.4 6 1.6 1.5 3.4 2.3 5.5 2.3s3.9-.8 5.4-2.3c1.5-1.6 2.2-3.5 2.2-6 0-2.4-.7-4.5-2.2-6.1-1.5-1.6-3.3-2.4-5.4-2.4-2.1 0-4 .8-5.5 2.4-1.6 1.6-2.4 3.6-2.4 6.1z"}),C=r.a.createElement("path",{className:"st0",d:"M52 46.1v-4.9c6.4 0 25.9.1 33.8.1 17.2 0 34.4-.1 51.6-.1 6.3 0 11.6-3.9 13.2-9.9 1-3.7.5-7.2-2.1-10.2-2.3-2.6-5.1-3.7-8.5-3.5-3.3.3-6.3 3.2-6.8 6.5-.3 2.6.5 4.6 2.7 6 1.6 1 3.4 1.1 5.2.3.6-.3 1.1-.7 1.5-1.3.7-1.2 2.1-1.6 3.2-.9 1.2.6 1.6 2 1 3.3-.9 1.8-2.4 2.9-4.2 3.6-6.2 2.4-13.2-1.6-14.2-8.2-.7-4.8 1.7-9.9 6-12.4 3.5-2.1 7.3-2.3 11-1 5.5 1.9 9 5.8 10.2 11.5.8 4.1 0 8-2 11.6-2.9 5.2-7.4 8.2-13.3 9.2-1 .2-2 .2-3 .2-10.2.1-73.6.1-85.3.1z"}),v=r.a.createElement("path",{className:"st2",d:"M92.4 35.8h-25v-2.6h43.9c3.5 0 5.9-1.6 6.8-4.9.5-2-.1-4.9-1.5-6.6-1.2-1.4-3.4-2-5.3-1.9-1.8.1-3.5 1.8-3.7 3.6-.2 1.4.3 2.5 1.5 3.3.9.5 1.9.6 2.8.2.3-.1 1.1-.3 1.6.2.8.9.2 2-.8 2.4-3.4 1.3-7.3-.9-7.8-4.5-.4-2.6 1-5.4 3.3-6.8 1.9-1.1 5-1.1 7.1-.4 3 1 4.9 4 5.6 7.1.5 2.2 0 4.4-1.1 6.4-1.6 2.8-3.7 3.9-6.9 4.5-.5.1-1.1.1-1.7.1H94.4c-.6-.1-1.3-.1-2-.1zm65.2 16.3c3.6 0 6.2 1.9 7.8 5 1.3 2.6 1.4 5.3-.4 7.9-1.6 2.3-3.8 3.3-6.6 3.1-2.7-.2-4.9-2.4-5.3-5.1-.1-.4-.1-.7-.1-1.1.1-.7.7-1.2 1.4-1.2s1.3.5 1.4 1.2c.1.5.1 1 .3 1.5.6 1.5 2.2 2.2 3.8 1.8 2.2-.5 3.6-2.5 3.4-4.8-.2-2.5-2.1-4.7-4.7-5.2-.4-.1-.9-.1-1.3-.1-13.1 0-51.1.1-64.2.1v-3.1h64.5z"}),h=function(e){var t=e.svgRef,a=p(e,["svgRef"]);return r.a.createElement("svg",d({id:"Layer_1",viewBox:"0 0 230 132",ref:t},a),f,y,C,v)},g=r.a.forwardRef(function(e,t){return r.a.createElement(h,d({svgRef:t},e))}),E=(a.p,function(){return r.a.createElement("footer",{className:_.a.Footer__wrapper},r.a.createElement("a",{className:_.a.Footer__hyperlink,href:"https://openaq.org/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(g,{className:_.a.Footer__icon})),r.a.createElement("div",null,"Air quality data by"))}),b=a(13),O=a.n(b),D=a(5),S=(a(50),a(51),a(33)),w=a.n(S),R=a(43),j=a(34),I=a.n(j),F=function(){return r.a.createElement("span",{className:I.a.Spinner})};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var x=r.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),k=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),L=function(e){var t=e.svgRef,a=N(e,["svgRef"]);return r.a.createElement("svg",T({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),x,k)},A=r.a.forwardRef(function(e,t){return r.a.createElement(L,T({svgRef:t},e))}),B=(a.p,[{name:"Poland",code:"PL"},{name:"Germany",code:"DE"},{name:"Spain",code:"ES"},{name:"France",code:"FR"}]),M=function(e){return e.name},q=function(e){return r.a.createElement("div",null,e.name)},H=function(){return!0},z=[{value:"pm25",label:"PM2.5",norm:25},{value:"pm10",label:"PM10",norm:50},{value:"no2",label:"NO2",norm:200},{value:"o3",label:"O3",norm:120},{value:"co",label:"CO",norm:1e4}],V=function(e){var t=e.loading,a=e.onSubmit,i=function(e,t){var a=Object(n.useState)(localStorage.getItem(e)||t),r=Object(D.a)(a,2),i=r[0],c=r[1];return[i,function(t){localStorage.setItem(e,t),c(t)}]}("input_value",""),c=Object(D.a)(i,2),o=c[0],u=c[1],l=function(e,t){var a=Object(n.useState)(JSON.parse(localStorage.getItem(e))||t),r=Object(D.a)(a,2),i=r[0],c=r[1];return[i,function(t){localStorage.setItem(e,JSON.stringify(t)),c(t)}]}("select_value",z[0]),s=Object(D.a)(l,2),_=s[0],m=s[1],d=Object(n.useState)([]),p=Object(D.a)(d,2),f=p[0],y=p[1],C=Object(n.useState)(!0),v=Object(D.a)(C,2),h=v[0],g=v[1],E={placeholder:"Type country name",value:o,onChange:function(e,t){var a=t.newValue;g(!0),u(a)},className:"react-autosuggest__input".concat(h?"":" react-autosuggest__input--error")};return r.a.createElement("form",{className:O.a.SearchInput__Wrapper,onSubmit:function(e){var t,n=(t=o,B.find(function(e){return e.name.toLowerCase()===t.trim().toLowerCase()}));n?a(n.code,_.value):g(!1),e.preventDefault()}},r.a.createElement(w.a,{suggestions:f,onSuggestionsFetchRequested:function(e){var t=e.value;return y(function(e){var t=e.trim().toLowerCase(),a=t.length;return 0===a?B:B.filter(function(e){return e.name.toLowerCase().slice(0,a)===t})}(t))},onSuggestionsClearRequested:function(){return y([])},getSuggestionValue:M,renderSuggestion:q,inputProps:E,shouldRenderSuggestions:H,highlightFirstSuggestion:!0}),r.a.createElement(R.a,{value:_,options:z,onChange:m,placeholder:"Parameter",className:"react-select-container",classNamePrefix:"react-select",isSearchable:!1}),r.a.createElement("button",{className:O.a.SearchInput__Button},t?r.a.createElement(F,null):r.a.createElement(A,null)))},P=function(e){return r.a.createElement("nav",{className:O.a.SearchBar__Wrapper},r.a.createElement(V,e))},W=a(4),U=a.n(W),J=a(42),X=a(1),Y=a.n(X);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Z=r.a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),K=r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),$=function(e){var t=e.svgRef,a=Q(e,["svgRef"]);return r.a.createElement("svg",G({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),Z,K)},ee=r.a.forwardRef(function(e,t){return r.a.createElement($,G({svgRef:t},e))}),te=(a.p,function(e,t){var a=z.find(function(e){return e.value===t});if(!a)return"#000";var n=Math.max(120*(1-Math.max(e-a.norm,0)/a.norm),0);return"hsl(".concat(n,", 100%, 40%)")}),ae=function(e){var t=e.city,a=e.requestCityData,n=t.lastUpdated.split("T"),i=Object(D.a)(n,2),c=i[0],o=i[1].slice(0,5);return r.a.createElement("summary",{className:U.a.CityDataCard__Summary,onClick:function(){!t.dataLoaded&&a(t)}},r.a.createElement(ee,null),r.a.createElement("div",{className:U.a.CityDataCard__Header},r.a.createElement("span",{className:U.a.CityDataCard__Cityname},t.city),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,t.parameterLabel,":\xa0"),r.a.createElement("span",{className:U.a.CityDataCard__Value,style:{color:te(t.value,t.parameter)}},Math.round(t.value)),r.a.createElement("span",null,t.unit)),r.a.createElement("div",{className:U.a.CityDataCard__TimeStamp},c+", "+o))))},ne=a(7),re=a.n(ne),ie=function(e){return window.open(e,"_blank")},ce=a(38),oe=a.n(ce),ue=function(e){var t=e.text,a=e.onClick;return r.a.createElement("button",{className:oe.a.TextButton,onClick:a},t)},le=function(e){var t=e.city;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:re.a.CityDataCard__ContentMain},t.dataLoaded&&r.a.createElement("p",null,t.data.articleSummary)),r.a.createElement("div",{className:re.a.CityDataCard__ContentFooter},r.a.createElement(ue,{text:"more",onClick:function(){return ie(t.data.articleUrl)}})))},se=function(e){var t=e.city;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:re.a.CityDataCard__ContentMainAmbigious},r.a.createElement("p",null,t.data.articleSummary),r.a.createElement("div",null,"This seems a little ambigious, was it what you are looking for?")),r.a.createElement("div",{className:re.a.CityDataCard__ContentFooter},r.a.createElement(ue,{text:"let me clear this up",onClick:function(){return ie(t.data.articleUrl)}})))},_e=function(e){var t=e.city;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:re.a.CityDataCard__ContentMainFailed},r.a.createElement("p",null,"Oops! It seems we could not find data you are looking for...")),r.a.createElement("div",{className:re.a.CityDataCard__ContentFooter},r.a.createElement(ue,{text:"let me handle that",onClick:function(){return ie("https://en.wikipedia.org/w/index.php?search="+t.city)}})))},me=function(){return r.a.createElement("div",{className:re.a.CityDataCard__ContentMainLoading},r.a.createElement(F,null))},de=function(e){var t=e.city;return r.a.createElement("div",{className:re.a.CityDataCard__Content},t.dataFetching?r.a.createElement(me,null):void 0===t.data.isInvalid||t.data.isInvalid?r.a.createElement(_e,{city:t}):t.data.isCorrect?r.a.createElement(le,{city:t}):t.data.isAmbigious?r.a.createElement(se,{city:t}):null)},pe=function(e){var t=e.requestCityData,a=Object(J.a)(e,["requestCityData"]);return r.a.createElement("details",{className:U.a.CityDataCard__Wrapper},r.a.createElement(ae,Object.assign({},a,{requestCityData:t})),r.a.createElement(de,a))},fe=(Y.a.shape({country:Y.a.string.isRequired,city:Y.a.string.isRequired,location:Y.a.string.isRequired,parameter:Y.a.string.isRequired,value:Y.a.number.isRequired,unit:Y.a.string.isRequired}).isRequired,function(e){var t=e.open,a=e.cities,n=e.inputRef,i=e.requestCityData,c="".concat(U.a.Results__Body," ").concat(t?U.a.Results__BodyOpen:U.a.Results__BodyClosed);return r.a.createElement("main",{className:U.a.Resuls__Wrapper,ref:n},r.a.createElement("section",{className:c},a.map(function(e){return r.a.createElement(pe,{key:e.id,city:e,requestCityData:i})})))}),ye=a(9),Ce=a(12),ve=a(11),he=a.n(ve),ge=a(16),Ee=encodeURIComponent,be=function(e,t){return"".concat(e,"?").concat(Object.keys(t).map(function(e){return Ee(e)+"="+(Array.isArray(t[e])?t[e].map(function(e){return Ee(e)}).join("&"):Ee(t[e]))}).join("&"))},Oe=a(17),De=a.n(Oe),Se=function(e){return e.map(function(e){return{country:e.country,city:e.city,location:e.location,parameter:e.measurements[0].parameter,value:e.measurements[0].value,unit:e.measurements[0].unit,lastUpdated:e.measurements[0].lastUpdated}})},we=function(e){return e.filter(function(e){var t=new Date(e.lastUpdated),a=new Date;return t>(new Date).setDate(a.getDate()-30)})},Re=function(e){return e.sort(function(e,t){return t.value-e.value})},je=function(e,t){for(var a=[],n=e.map(function(e){return e.city}),r=0;r<e.length&&(t<0||a.length<t);r++){var i=e[r].city;n.indexOf(i)>=r&&a.push(e[r])}return a},Ie=function(e){return e.map(function(e){return Object(o.a)({},e,{city:(t=e.city,a="/",t.split(a)[0])});var t,a})},Fe=function(e){return e.map(function(e){return Object(o.a)({},e,{id:De.a.v4(),parameterLabel:z.find(function(t){return t.value===e.parameter}).label,data:{},dataFetching:!1,dataLoaded:!1})})},Te=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce(function(e,t){return t(e)},e)}},Ne=function(){var e=Object(ge.a)(he.a.mark(function e(t){var a,n,r,i,c,o,u=arguments;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:10,n=u.length>2&&void 0!==u[2]?u[2]:"pm25",r=be("https://api.openaq.org/v1/latest",{country:t,order_by:"measurements[0]lastUpdated",sort:"desc",parameter:n}),e.prev=4,e.next=7,fetch(r);case 7:return i=e.sent,e.next=10,i.json();case 10:return c=e.sent,o=Te(function(e){return e.results},Se,we,Ie,function(e){return je(e,a)},Re,Fe)(c),e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(4),{err:e.t0,message:"Failed to fetch city list."};case 19:case"end":return e.stop()}},e,null,[[4,15]])}));return function(t){return e.apply(this,arguments)}}(),xe=function(e){return Object(ye.showSnack)(De.a.v4(),{label:e,timeout:5e3,button:{label:"OK"}})},ke=["capital","city","cities","town","village","province","district","region","department","state","county","municipality","prefecture","community"],Le=["(listen)"],Ae=function(e){return e.articleSummary},Be=function(e){return e.articleSummary.includes("refer")||!ke.map(function(t){return e.articleSummary.includes(t)}).some(function(e){return e})},Me=function(e){var t=Ae(e)&&!Be(e),a=Ae(e)&&Be(e),n=!t&&!a;return Object(o.a)({},e,{isCorrect:t,isAmbigious:a,isInvalid:n})},qe=function(e){return Object(o.a)({},e,{articleSummary:(t=e.articleSummary,a=Le,a.reduce(function(e,t){return e.replace(t,"")},t))});var t,a},He=function(){var e=Object(ge.a)(he.a.mark(function e(t){var a,n,r,i;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=be("https://en.wikipedia.org/w/api.php",{action:"query",format:"json",prop:["extracts","exintro","explaintext","redirects"],origin:"*",titles:t}),e.prev=2,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,i=Te(function(e){return e.query.pages},function(e){return e[Object.keys(e)[0]]},function(e){return{articeTitle:e.title,articleSummary:(t=e.extract||"",a=1,t.split(". ").slice(0,a).join(". ")+". "),articleUrl:"https://en.wikipedia.org/?curid="+e.pageid};var t,a},Me,qe)(r),e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(2),c=e.t0,Object(o.a)({},c,{message:"Failed to fetch city data."});case 16:case"end":return e.stop()}var c},e,null,[[2,13]])}));return function(t){return e.apply(this,arguments)}}(),ze=Object(Ce.connect)(function(e){return Object(o.a)({},e.cities)},function(e){return{fetchCities:function(t,a){return e(function(e,t,a){return function(n){n({type:"FETCH_CITIES"}),Ne(e,t,a).then(function(e){return n(function(e){return{type:"LOAD_CITIES",cities:e}}(e))}).catch(function(e){n({type:"FETCH_CITIES_ERROR"}),n(xe(e.message)),console.error(e)})}}(t,10,a))},fetchCityData:function(t){return e(function(e){return function(t){t({type:"FETCH_CITY_DATA",cityId:e.id}),He(e.city).then(function(a){return t(function(e,t){return{type:"LOAD_CITY_DATA",cityId:e,cityData:t}}(e.id,a))}).catch(function(a){t({type:"FETCH_CITY_DATA_ERROR",cityId:e.id}),t(xe(a.message)),console.error(a)})}}(t))}}})(function(e){var t=r.a.createRef();return Object(n.useEffect)(function(){e.citiesLoaded&&!e.citiesFetching&&window.scrollTo({top:t.current.offsetTop,behavior:"smooth"})},[e.citiesLoaded,e.citiesFetching]),r.a.createElement("div",{className:l.a.App},r.a.createElement(m,null),r.a.createElement(P,{loading:e.citiesFetching,onSubmit:e.fetchCities}),r.a.createElement(fe,{open:e.citiesLoaded,cities:e.cities,inputRef:t,requestCityData:e.fetchCityData}),r.a.createElement(E,null),r.a.createElement(ye.Snackbar,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ve=a(8),Pe=a(40),We={cities:[],citiesFetching:!1,citiesLoaded:!1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CITIES":return Object(o.a)({},e,{citiesFetching:!0});case"LOAD_CITIES":return Object(o.a)({},e,{cities:t.cities,citiesFetching:!1,citiesLoaded:!0});case"FETCH_CITIES_ERROR":return Object(o.a)({},e,{citiesFetching:!1});case"FETCH_CITY_DATA":return Object(o.a)({},e,{cities:e.cities.map(function(e){return e.id!==t.cityId?e:Object(o.a)({},e,{dataFetching:!0})})});case"LOAD_CITY_DATA":return Object(o.a)({},e,{cities:e.cities.map(function(e){return e.id!==t.cityId?e:Object(o.a)({},e,{data:t.cityData,dataFetching:!1,dataLoaded:!0})})});case"FETCH_CITY_DATA_ERROR":return Object(o.a)({},e,{cities:e.cities.map(function(e){return e.id!==t.cityId?e:Object(o.a)({},e,{dataFetching:!1})})});default:return e}},Je=Object(Ve.c)({cities:Ue,snackbar:ye.snackbarReducer}),Xe=Object(Ve.e)(Je,Object(Ve.d)(Object(Ve.a)(Pe.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));c.a.render(r.a.createElement(Ce.Provider,{store:Xe},r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.8fe77033.chunk.js.map